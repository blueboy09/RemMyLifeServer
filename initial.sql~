CREATE SCHEMA IF NOT EXISTS `RemMyLife`;

USE `RemMyLife`;

CREATE TABLE IF NOT EXISTS `UserList`(
	`userID` INT(32) NOT NULL AUTO_INCREMENT,
	`userName` VARCHAR(32) NOT NULL DEFAULT 'FUCK BOY',
	`password` VARCHAR(32) NOT NULL DEFAULT '12345678',
	`nickName` VARCHAR(64) NOT NULL DEFAULT 'SEXY LADY',
	`SEX` ENUM('male','female') NOT NULL DEFAULT 'male',
	`birthday` VARCHAR(32) NOT NULL DEFAULT '1900-01-01',
	`headPortrait` longblob,
	PRIMARY KEY(userID,userName)
) ENGINE = INNODB AUTO_INCREMENT = 1 DEFAULT CHARSET = utf8;

CREATE TABLE IF NOT EXISTS `DiaryList` (
	`diaryID` INT (32) NOT NULL AUTO_INCREMENT,
	`userID`  INT(32) NOT NULL,
	`TYPE` ENUM('TEXT_DIARY','IMAGE_DIARY','VOICE_DIARY','VEDIO_DIARY') NOT NULL DEFAULT 'TEXT_DIARY',
	`TITLE` VARCHAR (256) NOT NULL DEFAULT 'New Diary',
	`createDate` VARCHAR (32) NOT NULL DEFAULT '',
	`LastSaveDate` VARCHAR (32) NOT NULL DEFAULT '',
	`WEATHER` ENUM('SUNNY','WET','CLOUDY','FOGGY','SNOWY','WINDY') NOT NULL DEFAULT 'SUNNY',
	`SHARED` boolean not null default '0',
	PRIMARY KEY (`diaryID`),
	CONSTRAINT User_Diary FOREIGN KEY DiaryList (userID) REFERENCES UserList (userID) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = INNODB AUTO_INCREMENT = 1 DEFAULT CHARSET = utf8;

CREATE TABLE IF NOT EXISTS `TextList` (
	`diaryID` INT (32) NOT NULL ,
	`TEXT` VARCHAR (4096) ,
	PRIMARY KEY (`diaryID`),
	CONSTRAINT Main_Text FOREIGN KEY TextList (diaryID) REFERENCES DiaryList (diaryID) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = INNODB DEFAULT CHARSET = utf8 ;

CREATE TABLE IF NOT EXISTS `ImageList` (
	`diaryID` INT (32) NOT NULL ,
	`NOTE` VARCHAR (1028) ,
	`ImageData` longblob,
	PRIMARY KEY (`diaryID`),
	CONSTRAINT Main_Image FOREIGN KEY ImageList (diaryID) REFERENCES DiaryList (diaryID) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = INNODB DEFAULT CHARSET = utf8 ;

CREATE TABLE IF NOT EXISTS `VoiceList` (
	`diaryID` INT (32) NOT NULL ,
	`NOTE` VARCHAR (1028) ,
	`VoiceData` longblob,
	PRIMARY KEY (`diaryID`),
	CONSTRAINT Main_Voice FOREIGN KEY VoiceList (diaryID) REFERENCES DiaryList (diaryID) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = INNODB DEFAULT CHARSET = utf8 ;

CREATE TABLE IF NOT EXISTS `CommentList`(
	`commentID` INT (32) NOT NULL AUTO_INCREMENT,
	`userID` INT(32) NOT NULL,
	`diaryID` INT(32) NOT NULL,
	`content` VARCHAR(256),
	PRIMARY KEY (`commentID`),
	CONSTRAINT Diary_Comment FOREIGN KEY `Comment` (diaryID) REFERENCES `DiaryList` (diaryID) ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT User_Comment FOREIGN KEY `Comment` (userID) REFERENCES `UserList` (userID) ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE = INNODB AUTO_INCREMENT = 1 DEFAULT CHARSET = utf8 ;